题解：把下标看做笛卡尔树的$k$值，把矩形的长看做笛卡尔树的$w$值，建立笛卡尔树（小根堆），$dfs$一遍树，每个节点统计一下其子树的总矩形宽之和，节点子树的总矩形宽之和就是以节点对应矩形的长为新矩形的一条边情况下新矩形的另一条边最长的长度，我们会发现正方形的边长就是节点对应的矩形的长和子树的总矩形宽的最小值，然后答案就是所有节点所形成的正方形的边长的最大值的平方。时间复杂度$O(n)$，空间复杂度$O(n)$。
